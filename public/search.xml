<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>Facade - Design Pattern</title>
      <link href="/2024/07/30/facade-design-pattern/"/>
      <url>/2024/07/30/facade-design-pattern/</url>
      
        <content type="html"><![CDATA[<p><img src="/uploads/facade-design-pattern/cover.png" alt="Alt Text"></p>        <h1 id="What-is-the-Facade-Design-Pattern"   >          <a href="#What-is-the-Facade-Design-Pattern" class="heading-link"><i class="fas fa-link"></i></a><a href="#What-is-the-Facade-Design-Pattern" class="headerlink" title="What is the Facade Design Pattern?"></a>What is the Facade Design Pattern?</h1>      <p><strong>The Facade design pattern</strong> is a structural pattern that provides a simplified interface to a complex system of classes, libraries, or frameworks. It hides the complexities of the system and makes it easier to use by providing a unified, high-level interface.</p><span id="more"></span>        <h1 id="Metaphor"   >          <a href="#Metaphor" class="heading-link"><i class="fas fa-link"></i></a><a href="#Metaphor" class="headerlink" title="Metaphor"></a>Metaphor</h1>      <p><img src="/uploads/facade-design-pattern/metaphor-facade.png" alt="Alt Text"><br>In this image, we see an interface through which we can easily drive the car. The driver, through this high-level interface, interacts with other complicated subsystems (engine, other components). The driver may not know these subsystems, but can use this high-level interface, which represents the Facade, to drive the car.</p>        <h1 id="UML-Diagram"   >          <a href="#UML-Diagram" class="heading-link"><i class="fas fa-link"></i></a><a href="#UML-Diagram" class="headerlink" title="UML Diagram"></a>UML Diagram</h1>      <p><img src="/uploads/facade-design-pattern/UML.png" alt="Alt Text"></p>        <h1 id="Advantages-of-Using-the-Facade-Pattern"   >          <a href="#Advantages-of-Using-the-Facade-Pattern" class="heading-link"><i class="fas fa-link"></i></a><a href="#Advantages-of-Using-the-Facade-Pattern" class="headerlink" title="Advantages of Using the Facade Pattern"></a>Advantages of Using the Facade Pattern</h1>      <ol><li><strong>Simplified Interface</strong>: The Facade pattern provides a single, easy-to-use interface for complex subsystems.</li><li><strong>Reduces Complexity</strong>: By hiding the intricate details of the subsystems, it reduces the learning curve and eases the use of the system.</li><li><strong>Decoupling</strong>: It decouples the client code from the subsystem, making the code more modular and easier to maintain.</li><li><strong>Improved Code Readability</strong>: Simplified interfaces improve the readability and manageability of the code.</li></ol>        <h1 id="Implementing-the-Facade-Pattern-in-C"   >          <a href="#Implementing-the-Facade-Pattern-in-C" class="heading-link"><i class="fas fa-link"></i></a><a href="#Implementing-the-Facade-Pattern-in-C" class="headerlink" title="Implementing the Facade Pattern in C#"></a>Implementing the Facade Pattern in C#</h1>      <p>Consider a scenario where we have a complex system for managing a home theater. It consists of several subsystems: Amplifier, DVDPlayer, Projector, and Screen. Let’s implement a Facade for this system.</p><p><img src="/uploads/facade-design-pattern/home-theater.jpg" alt="Alt Text"></p>        <h2 id="Subsystem-classes"   >          <a href="#Subsystem-classes" class="heading-link"><i class="fas fa-link"></i></a><a href="#Subsystem-classes" class="headerlink" title="Subsystem classes"></a>Subsystem classes</h2>      <figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Amplifier</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">On</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Amplifier is on&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Off</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Amplifier is off&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">SetVolume</span>(<span class="params"><span class="built_in">int</span> level</span>)</span> =&gt; Console.WriteLine(<span class="string">$&quot;Amplifier volume set to <span class="subst">&#123;level&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">DVDPlayer</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">On</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;DVD Player is on&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Off</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;DVD Player is off&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Play</span>(<span class="params"><span class="built_in">string</span> movie</span>)</span> =&gt; Console.WriteLine(<span class="string">$&quot;Playing movie: <span class="subst">&#123;movie&#125;</span>&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Projector</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">On</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Projector is on&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Off</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Projector is off&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WideScreenMode</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Projector in widescreen mode&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">Screen</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Down</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Screen is down&quot;</span>);</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Up</span>()</span> =&gt; Console.WriteLine(<span class="string">&quot;Screen is up&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></div></figure>        <h2 id="Facade-class"   >          <a href="#Facade-class" class="heading-link"><i class="fas fa-link"></i></a><a href="#Facade-class" class="headerlink" title="Facade class"></a>Facade class</h2>      <figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">HomeTheaterFacade</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> Amplifier _amplifier;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> DVDPlayer _dvdPlayer;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> Projector _projector;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">readonly</span> Screen _screen;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">HomeTheaterFacade</span>(<span class="params">Amplifier amplifier, DVDPlayer dvdPlayer, Projector projector, Screen screen</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        _amplifier = amplifier;</span><br><span class="line">        _dvdPlayer = dvdPlayer;</span><br><span class="line">        _projector = projector;</span><br><span class="line">        _screen = screen;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">WatchMovie</span>(<span class="params"><span class="built_in">string</span> movie</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Get ready to watch a movie...&quot;</span>);</span><br><span class="line">        _screen.Down();</span><br><span class="line">        _projector.On();</span><br><span class="line">        _projector.WideScreenMode();</span><br><span class="line">        _amplifier.On();</span><br><span class="line">        _amplifier.SetVolume(<span class="number">5</span>);</span><br><span class="line">        _dvdPlayer.On();</span><br><span class="line">        _dvdPlayer.Play(movie);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">EndMovie</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        Console.WriteLine(<span class="string">&quot;Shutting movie theater down...&quot;</span>);</span><br><span class="line">        _dvdPlayer.Off();</span><br><span class="line">        _amplifier.Off();</span><br><span class="line">        _projector.Off();</span><br><span class="line">        _screen.Up();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="Using-the-Facade"   >          <a href="#Using-the-Facade" class="heading-link"><i class="fas fa-link"></i></a><a href="#Using-the-Facade" class="headerlink" title="Using the Facade"></a>Using the Facade</h2>      <figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title">Program</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">static</span> <span class="keyword">void</span> <span class="title">Main</span>(<span class="params"><span class="built_in">string</span>[] args</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        Amplifier amplifier = <span class="keyword">new</span> Amplifier();</span><br><span class="line">        DVDPlayer dvdPlayer = <span class="keyword">new</span> DVDPlayer();</span><br><span class="line">        Projector projector = <span class="keyword">new</span> Projector();</span><br><span class="line">        Screen screen = <span class="keyword">new</span> Screen();</span><br><span class="line"></span><br><span class="line">        HomeTheaterFacade homeTheater = <span class="keyword">new</span> HomeTheaterFacade(amplifier, dvdPlayer, projector, screen);</span><br><span class="line"></span><br><span class="line">        homeTheater.WatchMovie(<span class="string">&quot;Predator&quot;</span>);</span><br><span class="line">        <span class="comment">// Output:</span></span><br><span class="line">        <span class="comment">// Get ready to watch a movie...</span></span><br><span class="line">        <span class="comment">// Screen is down</span></span><br><span class="line">        <span class="comment">// Projector is on</span></span><br><span class="line">        <span class="comment">// Projector in widescreen mode</span></span><br><span class="line">        <span class="comment">// Amplifier is on</span></span><br><span class="line">        <span class="comment">// Amplifier volume set to 5</span></span><br><span class="line">        <span class="comment">// DVD Player is on</span></span><br><span class="line">        <span class="comment">// Playing movie: Predator</span></span><br><span class="line"></span><br><span class="line">        homeTheater.EndMovie();</span><br><span class="line">        <span class="comment">// Output:</span></span><br><span class="line">        <span class="comment">// Shutting movie theater down...</span></span><br><span class="line">        <span class="comment">// DVD Player is off</span></span><br><span class="line">        <span class="comment">// Amplifier is off</span></span><br><span class="line">        <span class="comment">// Projector is off</span></span><br><span class="line">        <span class="comment">// Screen is up</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure>        <h2 id="Conclusion"   >          <a href="#Conclusion" class="heading-link"><i class="fas fa-link"></i></a><a href="#Conclusion" class="headerlink" title="Conclusion"></a>Conclusion</h2>      <p>The Facade design pattern is an excellent way to manage complexity in large systems by providing a simplified interface. In C#, the Facade pattern can significantly enhance code readability and maintainability, making it easier to interact with complex subsystems. By using the Facade pattern, you can create more modular, decoupled, and easy-to-use systems.</p>]]></content>
      
      
      <categories>
          
          <category> design pattern </category>
          
      </categories>
      
      
        <tags>
            
            <tag> design pattern </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Leaking domain knowledge to tests - Anti-pattern</title>
      <link href="/2024/06/17/leaking-domain-knowledge-antipattern/"/>
      <url>/2024/06/17/leaking-domain-knowledge-antipattern/</url>
      
        <content type="html"><![CDATA[<p><img src="/uploads/leaking-domain-knowledge-antipattern/cover.png" alt="Alt Text"><br>Leaking domain knowledge to tests is an anti-pattern in software development and testing. It occurs when the test code contains information about the implementation details of the system under test (SUT) rather than focusing on its behavior and expected outcomes. This can lead to a number of issues that undermine the effectiveness and maintainability of the tests.</p><span id="more"></span><p>It usually, takes place in tests that cover complex algorithms.<br>Let’s look at the following simple example.</p><p>Example 1:</p><figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">class</span> <span class="title">Calculator</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="built_in">int</span> <span class="title">Add</span>(<span class="params"><span class="built_in">int</span> value1, <span class="built_in">int</span> value2</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">return</span> value1 + value2;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>We have the <em><strong>Calculator</strong></em> class with a single <em><strong>Add</strong></em> method.<br>Let’s try to write an unit test.</p><p>Example 2: An incorrect way ❌</p><figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CalculatorTests</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Fact</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Adding_two_numbers</span>()</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> value1 = <span class="number">1</span>;</span><br><span class="line">        <span class="built_in">int</span> value2 = <span class="number">3</span>;</span><br><span class="line">        <span class="built_in">int</span> expected = value1 + value2;   <span class="comment">//   &lt;--- The leakage</span></span><br><span class="line">        </span><br><span class="line">        <span class="built_in">int</span> actual = Calculator.Add(value1, value2);</span><br><span class="line">        Assert.Equal(expected, actual);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>It looks fine, but, <em><strong>it is an anti-pattern</strong></em> because we repeat the algorithm from the <em><strong>Calculator</strong></em> class in our test method:</p><figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> expected = value1 + value2;</span><br></pre></td></tr></table></div></figure><p>Imagine that some changes will be made to the algorithm of the <em><strong>Add</strong></em> method from the <em><strong>Calculator</strong></em> class. Therefore, it will be necessary to make the same change in the unit test. So this is the biggest problem: Weak resistance to refactoring.</p><p>How to test the algorithm properly, then !?<br>So, instead of duplicating the algorithm, hard-code its expected results into the test, as demonstrated in the following example.</p><p>Example 3: A correct way ✔️</p><figure class="highlight csharp"><div class="table-container"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title">CalculatorTests</span></span><br><span class="line">&#123;</span><br><span class="line">    [<span class="meta">Theory</span>]</span><br><span class="line">    [<span class="meta">InlineData(1, 3, 4)</span>]</span><br><span class="line">    [<span class="meta">InlineData(11, 33, 44)</span>]</span><br><span class="line">    [<span class="meta">InlineData(100, 500, 600)</span>]</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">Adding_two_numbers</span>(<span class="params"><span class="built_in">int</span> value1, <span class="built_in">int</span> value2, <span class="built_in">int</span> expected</span>)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">int</span> actual = Calculator.Add(value1, value2);</span><br><span class="line">        Assert.Equal(expected, actual);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></div></figure><p>This example I found in Vladimir Khorikov’s book - ‘Unit Testing Principles, Practices, and Patterns’. It is indeed highly recommended for anyone interested in improving their understanding and practice of unit testing. It provides valuable insights, practical advice, and best practices for writing effective unit tests.</p><p>Key Characteristics of the Antipattern</p><ol><li><p><em><strong>Implementation Details in Tests</strong></em>: Tests include specifics about how the code is implemented rather than what it should do. For example, knowing the exact data structures or internal workings of the functions being tested.</p></li><li><p><em><strong>Tight Coupling</strong></em>: Tests become tightly coupled to the implementation. If the implementation changes, even if the external behavior remains the same, the tests break and need to be updated.</p></li><li><p><em><strong>Reduced Readability</strong></em>: Tests become harder to understand because they include complex implementation details that are not necessary for understanding the expected behavior.</p></li><li><p><em><strong>Fragility</strong></em>: Tests become fragile and more prone to failure due to minor changes in the codebase that do not affect the overall functionality but alter the internal implementation.</p></li><li><p><em><strong>Limited Refactoring</strong></em>: Developers are discouraged from refactoring code, as such changes would require corresponding changes in the test code, making refactoring a more daunting task.</p></li></ol>]]></content>
      
      
      <categories>
          
          <category> unit testing </category>
          
      </categories>
      
      
        <tags>
            
            <tag> unit testing </tag>
            
            <tag> anti-pattern </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
